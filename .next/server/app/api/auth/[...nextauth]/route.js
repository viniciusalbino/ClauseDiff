"use strict";(()=>{var e={};e.id=912,e.ids=[912],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},66847:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{GET:()=>c,POST:()=>c});var i=r(49303),n=r(88716),s=r(60670),o=r(75571),l=r.n(o),u=r(26109);let c=l()(u.L),p=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"/Users/viniciusalbino/Documents/GitHub/clausediff.nosync/app/api/auth/[...nextauth]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:d,serverHooks:f}=p,h="/api/auth/[...nextauth]/route";function y(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:d})}},69955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},75571:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var a={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.default}});var i=r(69955);Object.keys(i).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(a,e))&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(void 0);if(r&&r.has(e))return r.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&({}).hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}return a.default=e,r&&r.set(e,a),a}(r(45609));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}Object.keys(n).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(a,e))&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},26109:(e,t,r)=>{r.d(t,{L:()=>p});var a=r(77234),i=r(53797),n=r(13539),s=r(20728),o=r(42023),l=r.n(o),u=r(9133);let c=u.z.object({email:u.z.string().email(),password:u.z.string().min(6)}),p={adapter:(0,n.N)(s._),providers:[(0,i.Z)({name:"Email e Senha",credentials:{email:{label:"Email",type:"email",placeholder:"seu@email.com"},password:{label:"Senha",type:"password"}},async authorize(e){let t=c.safeParse(e);if(!t.success)throw Error("Credenciais inv\xe1lidas");let{email:r,password:a}=t.data,i=await s._.user.findUnique({where:{email:r}});if(!i||!i.password||!await l().compare(a,i.password))throw Error("Usu\xe1rio ou senha inv\xe1lidos");return{id:i.id,email:i.email,name:i.name||`${i.firstName||""} ${i.lastName||""}`.trim()||null,image:i.image,firstName:i.firstName,lastName:i.lastName,emailVerified:i.emailVerified,role:i.role}}}),...process.env.GOOGLE_CLIENT_ID&&process.env.GOOGLE_CLIENT_SECRET?[(0,a.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET,authorization:{params:{scope:"openid email profile"}},profile:e=>({id:e.sub,name:e.name||null,email:e.email,image:e.picture||null,emailVerified:e.email_verified?new Date:null,firstName:e.given_name||null,lastName:e.family_name||null})})]:[]],session:{strategy:"jwt",maxAge:2592e3,updateAge:86400},jwt:{maxAge:900},pages:{signIn:"/login",error:"/login"},useSecureCookies:!0,cookies:{sessionToken:{name:"__Secure-next-auth.session-token",options:{httpOnly:!0,sameSite:"strict",path:"/",secure:!0}},callbackUrl:{name:"__Secure-next-auth.callback-url",options:{httpOnly:!0,sameSite:"strict",path:"/",secure:!0}},csrfToken:{name:"__Host-next-auth.csrf-token",options:{httpOnly:!1,sameSite:"strict",path:"/",secure:!0}}},callbacks:{async signIn({user:e,account:t,profile:r}){if(t?.provider==="google"&&r&&e.id){let t={};r.picture&&r.picture!==e.image&&(t.image=r.picture);let a=r.email_verified?new Date:null,i=e.emailVerified;if(a?.getTime()!==(i instanceof Date?i.getTime():null)&&(t.emailVerified=a),r.given_name&&r.given_name!==e.firstName&&(t.firstName=r.given_name),r.family_name&&r.family_name!==e.lastName&&(t.lastName=r.family_name),r.name&&r.name!==e.name&&(t.name=r.name),Object.keys(t).length>0)try{await s._.user.update({where:{id:e.id},data:t})}catch(e){console.error("Error updating user in signIn callback:",e)}}return!0},async jwt({token:e,user:t}){t&&(e.id=t.id,e.role=t.role,e.firstName=t.firstName,e.lastName=t.lastName,e.city=t.city,e.state=t.state,e.cpf=t.cpf,e.emailVerified=t.emailVerified);let r=Math.floor(Date.now()/1e3),a=e.iat||r;if(r-a>300&&e.email)try{let t=await s._.user.findUnique({where:{email:e.email},select:{id:!0,email:!0,name:!0,firstName:!0,lastName:!0,city:!0,state:!0,cpf:!0,role:!0,emailVerified:!0}});t&&(e.id=t.id,e.role=t.role,e.firstName=t.firstName,e.lastName=t.lastName,e.city=t.city,e.state=t.state,e.cpf=t.cpf,e.emailVerified=t.emailVerified,e.iat=r)}catch(e){console.error("Error refreshing JWT token:",e)}return e},session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id,e.user.role=t.role,e.user.firstName=t.firstName,e.user.lastName=t.lastName,e.user.city=t.city,e.user.state=t.state,e.user.cpf=t.cpf,e.user.emailVerified=t.emailVerified),e),redirect:async({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t}}},20728:(e,t,r)=>{r.d(t,{_:()=>i});let a=require("@prisma/client"),i=globalThis.prisma??new a.PrismaClient({log:["error"],datasources:{db:{url:process.env.DATABASE_URL}}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,532,23,330,575],()=>r(66847));module.exports=a})();