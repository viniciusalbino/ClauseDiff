"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/[...nextauth]/route";
exports.ids = ["app/api/auth/[...nextauth]/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fviniciusalbino%2FDocuments%2FGitHub%2Fclausediff.nosync%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fviniciusalbino%2FDocuments%2FGitHub%2Fclausediff.nosync&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fviniciusalbino%2FDocuments%2FGitHub%2Fclausediff.nosync%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fviniciusalbino%2FDocuments%2FGitHub%2Fclausediff.nosync&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_viniciusalbino_Documents_GitHub_clausediff_nosync_app_api_auth_nextauth_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/[...nextauth]/route.ts */ \"(rsc)/./app/api/auth/[...nextauth]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/[...nextauth]/route\",\n        pathname: \"/api/auth/[...nextauth]\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/[...nextauth]/route\"\n    },\n    resolvedPagePath: \"/Users/viniciusalbino/Documents/GitHub/clausediff.nosync/app/api/auth/[...nextauth]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_viniciusalbino_Documents_GitHub_clausediff_nosync_app_api_auth_nextauth_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/[...nextauth]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGJTVCLi4ubmV4dGF1dGglNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZpbmljaXVzYWxiaW5vJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGY2xhdXNlZGlmZi5ub3N5bmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdmluaWNpdXNhbGJpbm8lMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZjbGF1c2VkaWZmLm5vc3luYyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDNEM7QUFDekg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jbGF1c2VkaWZmLS0tZG9jdW1lbnQtY29tcGFyaXNvbi10b29sLz8wNWQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy92aW5pY2l1c2FsYmluby9Eb2N1bWVudHMvR2l0SHViL2NsYXVzZWRpZmYubm9zeW5jL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy92aW5pY2l1c2FsYmluby9Eb2N1bWVudHMvR2l0SHViL2NsYXVzZWRpZmYubm9zeW5jL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fviniciusalbino%2FDocuments%2FGitHub%2Fclausediff.nosync%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fviniciusalbino%2FDocuments%2FGitHub%2Fclausediff.nosync&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/[...nextauth]/route.ts":
/*!*********************************************!*\
  !*** ./app/api/auth/[...nextauth]/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ handler),\n/* harmony export */   POST: () => (/* binding */ handler),\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"(rsc)/./node_modules/@next-auth/prisma-adapter/dist/index.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/dist/esm/index.js\");\n/**\n * Auth route para autenticação com NextAuth v4 (Next.js 14 App Router).\n *\n * POLÍTICA DE AUDITORIA E LOGGING:\n * - Este endpoint implementa logging/auditoria de eventos de autenticação (login, logout, falha, etc.)\n *   para fins de segurança, rastreabilidade e compliance (LGPD/GDPR).\n * - O logging é controlado pela feature flag de ambiente AUDIT_LOGGING_ENABLED.\n *   - Para ativar: defina AUDIT_LOGGING_ENABLED=on no .env\n *   - Por padrão, o log está DESLIGADO para evitar custos/desempenho no MVP.\n * - Os eventos são registrados na tabela AuditLog do banco via Prisma.\n * - Falhas no log NÃO afetam o fluxo de autenticação.\n *\n * Para ativar o login Google OAuth, defina GOOGLE_CLIENT_ID e GOOGLE_CLIENT_SECRET no .env\n * Exemplo:\n *   GOOGLE_CLIENT_ID=xxxx.apps.googleusercontent.com\n *   GOOGLE_CLIENT_SECRET=xxxx\n */ \n\n\n\n // Use singleton Prisma instance\n\n\nconst credentialsSchema = zod__WEBPACK_IMPORTED_MODULE_6__.z.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_6__.z.string().email(),\n    password: zod__WEBPACK_IMPORTED_MODULE_6__.z.string().min(6)\n});\nconst authOptions = {\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3__.PrismaAdapter)(_lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma),\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            name: \"Email e Senha\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\",\n                    placeholder: \"seu@email.com\"\n                },\n                password: {\n                    label: \"Senha\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                const parsed = credentialsSchema.safeParse(credentials);\n                if (!parsed.success) {\n                    throw new Error(\"Credenciais inv\\xe1lidas\");\n                }\n                const { email, password } = parsed.data;\n                const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.findUnique({\n                    where: {\n                        email\n                    }\n                });\n                if (!user || !user.password) {\n                    throw new Error(\"Usu\\xe1rio ou senha inv\\xe1lidos\");\n                }\n                const isValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_5___default().compare(password, user.password);\n                if (!isValid) {\n                    throw new Error(\"Usu\\xe1rio ou senha inv\\xe1lidos\");\n                }\n                // Return object must match NextAuth.User (augmented via types.ts)\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name || `${user.firstName || \"\"} ${user.lastName || \"\"}`.trim() || null,\n                    image: user.image,\n                    // Include other fields from augmented User type if available directly\n                    firstName: user.firstName,\n                    lastName: user.lastName,\n                    emailVerified: user.emailVerified,\n                    role: user.role\n                };\n            }\n        }),\n        ...process.env.GOOGLE_CLIENT_ID && process.env.GOOGLE_CLIENT_SECRET ? [\n            (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n                clientId: process.env.GOOGLE_CLIENT_ID,\n                clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n                authorization: {\n                    params: {\n                        scope: \"openid email profile\"\n                    }\n                },\n                // Use RawGoogleProfile for the input 'profile' parameter.\n                // The return type must conform to our augmented NextAuth.User type.\n                profile (profile) {\n                    // console.log(\"Google Profile in GoogleProvider.profile: \", profile);\n                    return {\n                        id: profile.sub,\n                        name: profile.name || null,\n                        email: profile.email,\n                        image: profile.picture || null,\n                        // These are the custom fields we added to our NextAuth.User type\n                        emailVerified: profile.email_verified ? new Date() : null,\n                        firstName: profile.given_name || null,\n                        lastName: profile.family_name || null\n                    };\n                }\n            })\n        ] : []\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    pages: {\n        signIn: \"/login\",\n        error: \"/login\"\n    },\n    callbacks: {\n        // Use the standard NextAuth callback signature\n        async signIn ({ user, account, profile }) {\n            // For Google OAuth, update user with latest info from Google profile if needed.\n            // The 'user' object here should already have an 'id' if it's an existing user or newly created by adapter.\n            if (account?.provider === \"google\" && profile && user.id) {\n                const googleProfile = profile;\n                // Update user with latest info from Google profile\n                const dataToUpdate = {}; // Use any to avoid Prisma type issues\n                if (googleProfile.picture && googleProfile.picture !== user.image) dataToUpdate.image = googleProfile.picture;\n                const profileEmailVerified = googleProfile.email_verified ? new Date() : null;\n                const userEmailVerified = user.emailVerified;\n                // Compare dates properly or always update if different\n                if (profileEmailVerified?.getTime() !== (userEmailVerified instanceof Date ? userEmailVerified.getTime() : null)) {\n                    dataToUpdate.emailVerified = profileEmailVerified;\n                }\n                if (googleProfile.given_name && googleProfile.given_name !== user.firstName) dataToUpdate.firstName = googleProfile.given_name;\n                if (googleProfile.family_name && googleProfile.family_name !== user.lastName) dataToUpdate.lastName = googleProfile.family_name;\n                // Update 'name' field if different\n                if (googleProfile.name && googleProfile.name !== user.name) {\n                    dataToUpdate.name = googleProfile.name;\n                }\n                if (Object.keys(dataToUpdate).length > 0) {\n                    try {\n                        await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.update({\n                            where: {\n                                id: user.id\n                            },\n                            data: dataToUpdate\n                        });\n                    } catch (error) {\n                        console.error(\"Error updating user in signIn callback:\", error);\n                    }\n                }\n            }\n            return true; // Allow sign in\n        },\n        async jwt ({ token, user }) {\n            // If it's a new user or new sign-in, 'user' object will be available.\n            // Persist the user.id and other essential fields to the token.\n            if (user?.id) {\n                token.id = user.id;\n                // Fetch the complete user from DB to ensure all fields are fresh, especially 'role'.\n                const dbUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.findUnique({\n                    where: {\n                        id: user.id\n                    }\n                });\n                if (dbUser) {\n                    token.name = dbUser.name || `${dbUser.firstName || \"\"} ${dbUser.lastName || \"\"}`.trim() || null;\n                    token.email = dbUser.email;\n                    token.picture = dbUser.image;\n                    token.role = dbUser.role;\n                    token.firstName = dbUser.firstName;\n                    token.lastName = dbUser.lastName;\n                    token.emailVerified = dbUser.emailVerified;\n                } else {\n                    // Fallback to user object if dbUser not found\n                    token.name = user.name || null;\n                    token.email = user.email || null;\n                    token.picture = user.image || null;\n                    token.role = user.role || null;\n                    token.firstName = user.firstName || null;\n                    token.lastName = user.lastName || null;\n                    token.emailVerified = user.emailVerified || null;\n                }\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            // Send properties to the client, like id and any custom user properties.\n            if (token && session.user) {\n                session.user.id = token.id;\n                session.user.name = token.name;\n                session.user.email = token.email;\n                session.user.image = token.picture;\n                session.user.role = token.role;\n                session.user.firstName = token.firstName;\n                session.user.lastName = token.lastName;\n                session.user.emailVerified = token.emailVerified;\n            }\n            return session;\n        },\n        async redirect ({ url, baseUrl }) {\n            const parsedUrl = new URL(url, baseUrl);\n            console.log(`Redirect callback: URL='${url}', BaseURL='${baseUrl}', Pathname='${parsedUrl.pathname}'`);\n            // If we're being redirected to /login with error=Callback, but authentication was successful,\n            // redirect to success page instead. The \"Callback\" error sometimes appears even on successful auth.\n            if (parsedUrl.pathname === \"/login\" && parsedUrl.searchParams.get(\"error\") === \"Callback\") {\n                console.log(\"Redirecting to success page despite Callback error\");\n                return `${baseUrl}/success`;\n            }\n            // If we're being redirected to /login without explicit errors, go to success\n            if (parsedUrl.pathname === \"/login\" && !parsedUrl.searchParams.has(\"error\")) {\n                console.log(\"Redirecting to success page from login\");\n                return `${baseUrl}/success`;\n            }\n            // For any other redirect to login with real errors, allow it\n            if (parsedUrl.pathname === \"/login\" && parsedUrl.searchParams.has(\"error\")) {\n                console.log(\"Allowing redirect to login with error:\", parsedUrl.searchParams.get(\"error\"));\n                return url;\n            }\n            // If there's a specific callbackUrl (not login), use it\n            const callbackUrl = parsedUrl.searchParams.get(\"callbackUrl\");\n            if (callbackUrl && callbackUrl !== `${baseUrl}/login`) {\n                console.log(\"Using callbackUrl:\", callbackUrl);\n                return callbackUrl;\n            }\n            console.log(\"Default redirect to:\", url);\n            return url;\n        }\n    },\n    events: {\n        async signIn () {},\n        async signOut () {},\n        async createUser () {},\n        async updateUser () {},\n        async linkAccount () {},\n        async session () {}\n    },\n    debug: \"development\" === \"development\"\n};\nconst handler = next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7OztDQWdCQyxHQUVnQztBQUd1QjtBQUNVO0FBQ1I7QUFDcEIsQ0FBQyxnQ0FBZ0M7QUFDekM7QUFDTjtBQW9CeEIsTUFBTU8sb0JBQW9CRCx5Q0FBUSxDQUFDO0lBQ2pDRyxPQUFPSCx5Q0FBUSxHQUFHRyxLQUFLO0lBQ3ZCRSxVQUFVTCx5Q0FBUSxHQUFHTSxHQUFHLENBQUM7QUFDM0I7QUFFTyxNQUFNQyxjQUEyQjtJQUN0Q0MsU0FBU1gsd0VBQWFBLENBQUNDLCtDQUFNQTtJQUM3QlcsV0FBVztRQUNUYiwyRUFBbUJBLENBQUM7WUFDbEJjLE1BQU07WUFDTkMsYUFBYTtnQkFDWFIsT0FBTztvQkFBRVMsT0FBTztvQkFBU0MsTUFBTTtvQkFBU0MsYUFBYTtnQkFBZ0I7Z0JBQ3JFVCxVQUFVO29CQUFFTyxPQUFPO29CQUFTQyxNQUFNO2dCQUFXO1lBQy9DO1lBQ0EsTUFBTUUsV0FBVUosV0FBVztnQkFDekIsTUFBTUssU0FBU2Ysa0JBQWtCZ0IsU0FBUyxDQUFDTjtnQkFDM0MsSUFBSSxDQUFDSyxPQUFPRSxPQUFPLEVBQUU7b0JBQ25CLE1BQU0sSUFBSUMsTUFBTTtnQkFDbEI7Z0JBQ0EsTUFBTSxFQUFFaEIsS0FBSyxFQUFFRSxRQUFRLEVBQUUsR0FBR1csT0FBT0ksSUFBSTtnQkFDdkMsTUFBTUMsT0FBTyxNQUFNdkIsK0NBQU1BLENBQUN1QixJQUFJLENBQUNDLFVBQVUsQ0FBQztvQkFBRUMsT0FBTzt3QkFBRXBCO29CQUFNO2dCQUFFO2dCQUU3RCxJQUFJLENBQUNrQixRQUFRLENBQUNBLEtBQUtoQixRQUFRLEVBQUU7b0JBQzNCLE1BQU0sSUFBSWMsTUFBTTtnQkFDbEI7Z0JBQ0EsTUFBTUssVUFBVSxNQUFNekIsdURBQWMsQ0FBQ00sVUFBVWdCLEtBQUtoQixRQUFRO2dCQUM1RCxJQUFJLENB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WUFDcEMsT0FBT0E7UUFDVDtJQUNGO0lBQ0FVLFFBQVE7UUFDTixNQUFNN0IsV0FBK0M7UUFDckQsTUFBTThCLFlBQWlEO1FBQ3ZELE1BQU1DLGVBQXVEO1FBQzdELE1BQU1DLGVBQXVEO1FBQzdELE1BQU1DLGdCQUF5RDtRQUMvRCxNQUFNcEMsWUFBaUQ7SUFDekQ7SUFDQXFDLE9BQU9yRCxrQkFBeUI7QUFDbEMsRUFBRTtBQUVGLE1BQU1zRCxVQUFVN0YsZ0RBQVFBLENBQUNhO0FBRWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2xhdXNlZGlmZi0tLWRvY3VtZW50LWNvbXBhcmlzb24tdG9vbC8uL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlLnRzP2M4YTQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBdXRoIHJvdXRlIHBhcmEgYXV0ZW50aWNhw6fDo28gY29tIE5leHRBdXRoIHY0IChOZXh0LmpzIDE0IEFwcCBSb3V0ZXIpLlxuICpcbiAqIFBPTMONVElDQSBERSBBVURJVE9SSUEgRSBMT0dHSU5HOlxuICogLSBFc3RlIGVuZHBvaW50IGltcGxlbWVudGEgbG9nZ2luZy9hdWRpdG9yaWEgZGUgZXZlbnRvcyBkZSBhdXRlbnRpY2HDp8OjbyAobG9naW4sIGxvZ291dCwgZmFsaGEsIGV0Yy4pXG4gKiAgIHBhcmEgZmlucyBkZSBzZWd1cmFuw6dhLCByYXN0cmVhYmlsaWRhZGUgZSBjb21wbGlhbmNlIChMR1BEL0dEUFIpLlxuICogLSBPIGxvZ2dpbmcgw6kgY29udHJvbGFkbyBwZWxhIGZlYXR1cmUgZmxhZyBkZSBhbWJpZW50ZSBBVURJVF9MT0dHSU5HX0VOQUJMRUQuXG4gKiAgIC0gUGFyYSBhdGl2YXI6IGRlZmluYSBBVURJVF9MT0dHSU5HX0VOQUJMRUQ9b24gbm8gLmVudlxuICogICAtIFBvciBwYWRyw6NvLCBvIGxvZyBlc3TDoSBERVNMSUdBRE8gcGFyYSBldml0YXIgY3VzdG9zL2Rlc2VtcGVuaG8gbm8gTVZQLlxuICogLSBPcyBldmVudG9zIHPDo28gcmVnaXN0cmFkb3MgbmEgdGFiZWxhIEF1ZGl0TG9nIGRvIGJhbmNvIHZpYSBQcmlzbWEuXG4gKiAtIEZhbGhhcyBubyBsb2cgTsODTyBhZmV0YW0gbyBmbHV4byBkZSBhdXRlbnRpY2HDp8Ojby5cbiAqXG4gKiBQYXJhIGF0aXZhciBvIGxvZ2luIEdvb2dsZSBPQXV0aCwgZGVmaW5hIEdPT0dMRV9DTElFTlRfSUQgZSBHT09HTEVfQ0xJRU5UX1NFQ1JFVCBubyAuZW52XG4gKiBFeGVtcGxvOlxuICogICBHT09HTEVfQ0xJRU5UX0lEPXh4eHguYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cbiAqICAgR09PR0xFX0NMSUVOVF9TRUNSRVQ9eHh4eFxuICovXG5cbmltcG9ydCBOZXh0QXV0aCBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgdHlwZSB7IEF1dGhPcHRpb25zLCBVc2VyIGFzIE5leHRBdXRoVXNlciwgQWNjb3VudCBhcyBOZXh0QXV0aEFjY291bnQsIFByb2ZpbGUgYXMgTmV4dEF1dGhQcm9maWxlLCBTZXNzaW9uIGFzIE5leHRBdXRoU2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCB7IEpXVCBhcyBOZXh0QXV0aEpXVCB9IGZyb20gXCJuZXh0LWF1dGgvand0XCI7XG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlXCI7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xuaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gXCJAbmV4dC1hdXRoL3ByaXNtYS1hZGFwdGVyXCI7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7IC8vIFVzZSBzaW5nbGV0b24gUHJpc21hIGluc3RhbmNlXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB0eXBlIHsgQWRhcHRlclVzZXIgfSBmcm9tIFwibmV4dC1hdXRoL2FkYXB0ZXJzXCI7XG5cbi8vIEludGVyZmFjZSBmb3IgdGhlIFJBVyBwcm9maWxlIGRhdGEgZnJvbSBHb29nbGUsIHVzZWQgaW4gc2lnbkluIGNhbGxiYWNrIGFuZCBHb29nbGVQcm92aWRlci5wcm9maWxlXG5pbnRlcmZhY2UgUmF3R29vZ2xlUHJvZmlsZSBleHRlbmRzIE5leHRBdXRoUHJvZmlsZSB7IFxuICBuYW1lPzogc3RyaW5nO1xuICBlbWFpbD86IHN0cmluZztcbiAgcGljdHVyZT86IHN0cmluZztcbiAgZW1haWxfdmVyaWZpZWQ/OiBib29sZWFuOyBcbiAgZ2l2ZW5fbmFtZT86IHN0cmluZzsgICBcbiAgZmFtaWx5X25hbWU/OiBzdHJpbmc7ICBcbiAgc3ViOiBzdHJpbmc7IC8vICdzdWInIGlzIGd1YXJhbnRlZWQgZnJvbSBHb29nbGUgYW5kIGlzIHRoZSBJRFxuICBpc3M/OiBzdHJpbmc7XG4gIGF6cD86IHN0cmluZztcbiAgYXVkPzogc3RyaW5nO1xuICBhdF9oYXNoPzogc3RyaW5nO1xuICBpYXQ/OiBudW1iZXI7XG4gIGV4cD86IG51bWJlcjtcbn1cblxuY29uc3QgY3JlZGVudGlhbHNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGVtYWlsOiB6LnN0cmluZygpLmVtYWlsKCksXG4gIHBhc3N3b3JkOiB6LnN0cmluZygpLm1pbig2KSxcbn0pO1xuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IEF1dGhPcHRpb25zID0ge1xuICBhZGFwdGVyOiBQcmlzbWFBZGFwdGVyKHByaXNtYSksXG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJFbWFpbCBlIFNlbmhhXCIsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBlbWFpbDogeyBsYWJlbDogXCJFbWFpbFwiLCB0eXBlOiBcImVtYWlsXCIsIHBsYWNlaG9sZGVyOiBcInNldUBlbWFpbC5jb21cIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJTZW5oYVwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfSxcbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gY3JlZGVudGlhbHNTY2hlbWEuc2FmZVBhcnNlKGNyZWRlbnRpYWxzKTtcbiAgICAgICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNyZWRlbmNpYWlzIGludsOhbGlkYXNcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHBhcnNlZC5kYXRhO1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXN1w6FyaW8gb3Ugc2VuaGEgaW52w6FsaWRvc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc3XDoXJpbyBvdSBzZW5oYSBpbnbDoWxpZG9zXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiBvYmplY3QgbXVzdCBtYXRjaCBOZXh0QXV0aC5Vc2VyIChhdWdtZW50ZWQgdmlhIHR5cGVzLnRzKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCBgJHt1c2VyLmZpcnN0TmFtZSB8fCAnJ30gJHt1c2VyLmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIHx8IG51bGwsXG4gICAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2UsXG4gICAgICAgICAgLy8gSW5jbHVkZSBvdGhlciBmaWVsZHMgZnJvbSBhdWdtZW50ZWQgVXNlciB0eXBlIGlmIGF2YWlsYWJsZSBkaXJlY3RseVxuICAgICAgICAgIGZpcnN0TmFtZTogdXNlci5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IHVzZXIubGFzdE5hbWUsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogdXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSksXG4gICAgLi4uKHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgJiYgcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVRcbiAgICAgID8gW0dvb2dsZVByb3ZpZGVyKHtcbiAgICAgICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCEsXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCEsXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgICAgICAgcGFyYW1zOiB7IHNjb3BlOiBcIm9wZW5pZCBlbWFpbCBwcm9maWxlXCIgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vIFVzZSBSYXdHb29nbGVQcm9maWxlIGZvciB0aGUgaW5wdXQgJ3Byb2ZpbGUnIHBhcmFtZXRlci5cbiAgICAgICAgICAvLyBUaGUgcmV0dXJuIHR5cGUgbXVzdCBjb25mb3JtIHRvIG91ciBhdWdtZW50ZWQgTmV4dEF1dGguVXNlciB0eXBlLlxuICAgICAgICAgIHByb2ZpbGUocHJvZmlsZTogUmF3R29vZ2xlUHJvZmlsZSkgeyBcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiR29vZ2xlIFByb2ZpbGUgaW4gR29vZ2xlUHJvdmlkZXIucHJvZmlsZTogXCIsIHByb2ZpbGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6IHByb2ZpbGUuc3ViLCAvLyBUaGlzIG1hcHMgR29vZ2xlJ3MgJ3N1YicgdG8gTmV4dEF1dGgncyAnaWQnXG4gICAgICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSB8fCBudWxsLFxuICAgICAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCwgLy8gRW1haWwgaXMgZXhwZWN0ZWRcbiAgICAgICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucGljdHVyZSB8fCBudWxsLFxuICAgICAgICAgICAgICAvLyBUaGVzZSBhcmUgdGhlIGN1c3RvbSBmaWVsZHMgd2UgYWRkZWQgdG8gb3VyIE5leHRBdXRoLlVzZXIgdHlwZVxuICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkID8gbmV3IERhdGUoKSA6IG51bGwsXG4gICAgICAgICAgICAgIGZpcnN0TmFtZTogcHJvZmlsZS5naXZlbl9uYW1lIHx8IG51bGwsXG4gICAgICAgICAgICAgIGxhc3ROYW1lOiBwcm9maWxlLmZhbWlseV9uYW1lIHx8IG51bGwsXG4gICAgICAgICAgICAgIC8vICdyb2xlJyBpcyBub3QgcHJvdmlkZWQgYnkgR29vZ2xlLiBJdCB3aWxsIGRlZmF1bHQgZnJvbSBQcmlzbWEgc2NoZW1hIG9uIHVzZXIgY3JlYXRpb24sXG4gICAgICAgICAgICAgIC8vIG9yIGJlIHBvcHVsYXRlZCBpbiBKV1Qvc2Vzc2lvbiBjYWxsYmFja3MgZnJvbSBEQi5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgfSldXG4gICAgICA6IFtdKSxcbiAgXSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiBcImp3dFwiIGFzIGNvbnN0LFxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvbG9naW5cIixcbiAgICBlcnJvcjogXCIvbG9naW5cIiwgXG4gIH0sXG4gIGNhbGxiYWNrczoge1xuICAgIC8vIFVzZSB0aGUgc3RhbmRhcmQgTmV4dEF1dGggY2FsbGJhY2sgc2lnbmF0dXJlXG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9KSB7XG4gICAgICAvLyBGb3IgR29vZ2xlIE9BdXRoLCB1cGRhdGUgdXNlciB3aXRoIGxhdGVzdCBpbmZvIGZyb20gR29vZ2xlIHByb2ZpbGUgaWYgbmVlZGVkLlxuICAgICAgLy8gVGhlICd1c2VyJyBvYmplY3QgaGVyZSBzaG91bGQgYWxyZWFkeSBoYXZlIGFuICdpZCcgaWYgaXQncyBhbiBleGlzdGluZyB1c2VyIG9yIG5ld2x5IGNyZWF0ZWQgYnkgYWRhcHRlci5cbiAgICAgIGlmIChhY2NvdW50Py5wcm92aWRlciA9PT0gXCJnb29nbGVcIiAmJiBwcm9maWxlICYmIHVzZXIuaWQpIHtcbiAgICAgICAgY29uc3QgZ29vZ2xlUHJvZmlsZSA9IHByb2ZpbGUgYXMgUmF3R29vZ2xlUHJvZmlsZTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSB1c2VyIHdpdGggbGF0ZXN0IGluZm8gZnJvbSBHb29nbGUgcHJvZmlsZVxuICAgICAgICBjb25zdCBkYXRhVG9VcGRhdGU6IGFueSA9IHt9OyAvLyBVc2UgYW55IHRvIGF2b2lkIFByaXNtYSB0eXBlIGlzc3Vlc1xuICAgICAgICBpZiAoZ29vZ2xlUHJvZmlsZS5waWN0dXJlICYmIGdvb2dsZVByb2ZpbGUucGljdHVyZSAhPT0gdXNlci5pbWFnZSkgZGF0YVRvVXBkYXRlLmltYWdlID0gZ29vZ2xlUHJvZmlsZS5waWN0dXJlO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJvZmlsZUVtYWlsVmVyaWZpZWQgPSBnb29nbGVQcm9maWxlLmVtYWlsX3ZlcmlmaWVkID8gbmV3IERhdGUoKSA6IG51bGw7XG4gICAgICAgIGNvbnN0IHVzZXJFbWFpbFZlcmlmaWVkID0gdXNlci5lbWFpbFZlcmlmaWVkO1xuICAgICAgICAvLyBDb21wYXJlIGRhdGVzIHByb3Blcmx5IG9yIGFsd2F5cyB1cGRhdGUgaWYgZGlmZmVyZW50XG4gICAgICAgIGlmIChwcm9maWxlRW1haWxWZXJpZmllZD8uZ2V0VGltZSgpICE9PSAodXNlckVtYWlsVmVyaWZpZWQgaW5zdGFuY2VvZiBEYXRlID8gdXNlckVtYWlsVmVyaWZpZWQuZ2V0VGltZSgpIDogbnVsbCkpIHtcbiAgICAgICAgICAgIGRhdGFUb1VwZGF0ZS5lbWFpbFZlcmlmaWVkID0gcHJvZmlsZUVtYWlsVmVyaWZpZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ29vZ2xlUHJvZmlsZS5naXZlbl9uYW1lICYmIGdvb2dsZVByb2ZpbGUuZ2l2ZW5fbmFtZSAhPT0gdXNlci5maXJzdE5hbWUpIGRhdGFUb1VwZGF0ZS5maXJzdE5hbWUgPSBnb29nbGVQcm9maWxlLmdpdmVuX25hbWU7XG4gICAgICAgIGlmIChnb29nbGVQcm9maWxlLmZhbWlseV9uYW1lICYmIGdvb2dsZVByb2ZpbGUuZmFtaWx5X25hbWUgIT09IHVzZXIubGFzdE5hbWUpIGRhdGFUb1VwZGF0ZS5sYXN0TmFtZSA9IGdvb2dsZVByb2ZpbGUuZmFtaWx5X25hbWU7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgJ25hbWUnIGZpZWxkIGlmIGRpZmZlcmVudFxuICAgICAgICBpZiAoZ29vZ2xlUHJvZmlsZS5uYW1lICYmIGdvb2dsZVByb2ZpbGUubmFtZSAhPT0gdXNlci5uYW1lKSB7XG4gICAgICAgICAgICBkYXRhVG9VcGRhdGUubmFtZSA9IGdvb2dsZVByb2ZpbGUubmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhkYXRhVG9VcGRhdGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXIuaWQhIH0sXG4gICAgICAgICAgICAgIGRhdGE6IGRhdGFUb1VwZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgdXNlciBpbiBzaWduSW4gY2FsbGJhY2s6XCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlOyAvLyBBbGxvdyBzaWduIGluXG4gICAgfSxcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciB9KSB7XG4gICAgICAvLyBJZiBpdCdzIGEgbmV3IHVzZXIgb3IgbmV3IHNpZ24taW4sICd1c2VyJyBvYmplY3Qgd2lsbCBiZSBhdmFpbGFibGUuXG4gICAgICAvLyBQZXJzaXN0IHRoZSB1c2VyLmlkIGFuZCBvdGhlciBlc3NlbnRpYWwgZmllbGRzIHRvIHRoZSB0b2tlbi5cbiAgICAgIGlmICh1c2VyPy5pZCkge1xuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XG4gICAgICAgIFxuICAgICAgICAvLyBGZXRjaCB0aGUgY29tcGxldGUgdXNlciBmcm9tIERCIHRvIGVuc3VyZSBhbGwgZmllbGRzIGFyZSBmcmVzaCwgZXNwZWNpYWxseSAncm9sZScuXG4gICAgICAgIGNvbnN0IGRiVXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdXNlci5pZCB9IH0pO1xuICAgICAgICBpZiAoZGJVc2VyKSB7XG4gICAgICAgICAgdG9rZW4ubmFtZSA9IGRiVXNlci5uYW1lIHx8IGAke2RiVXNlci5maXJzdE5hbWUgfHwgJyd9ICR7ZGJVc2VyLmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIHx8IG51bGw7XG4gICAgICAgICAgdG9rZW4uZW1haWwgPSBkYlVzZXIuZW1haWw7XG4gICAgICAgICAgdG9rZW4ucGljdHVyZSA9IGRiVXNlci5pbWFnZTtcbiAgICAgICAgICB0b2tlbi5yb2xlID0gZGJVc2VyLnJvbGU7XG4gICAgICAgICAgdG9rZW4uZmlyc3ROYW1lID0gZGJVc2VyLmZpcnN0TmFtZTtcbiAgICAgICAgICB0b2tlbi5sYXN0TmFtZSA9IGRiVXNlci5sYXN0TmFtZTtcbiAgICAgICAgICB0b2tlbi5lbWFpbFZlcmlmaWVkID0gZGJVc2VyLmVtYWlsVmVyaWZpZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gdXNlciBvYmplY3QgaWYgZGJVc2VyIG5vdCBmb3VuZFxuICAgICAgICAgIHRva2VuLm5hbWUgPSB1c2VyLm5hbWUgfHwgbnVsbDtcbiAgICAgICAgICB0b2tlbi5lbWFpbCA9IHVzZXIuZW1haWwgfHwgbnVsbDtcbiAgICAgICAgICB0b2tlbi5waWN0dXJlID0gdXNlci5pbWFnZSB8fCBudWxsO1xuICAgICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGUgfHwgbnVsbDtcbiAgICAgICAgICB0b2tlbi5maXJzdE5hbWUgPSB1c2VyLmZpcnN0TmFtZSB8fCBudWxsO1xuICAgICAgICAgIHRva2VuLmxhc3ROYW1lID0gdXNlci5sYXN0TmFtZSB8fCBudWxsO1xuICAgICAgICAgIHRva2VuLmVtYWlsVmVyaWZpZWQgPSB1c2VyLmVtYWlsVmVyaWZpZWQgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIC8vIFNlbmQgcHJvcGVydGllcyB0byB0aGUgY2xpZW50LCBsaWtlIGlkIGFuZCBhbnkgY3VzdG9tIHVzZXIgcHJvcGVydGllcy5cbiAgICAgIGlmICh0b2tlbiAmJiBzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQgYXMgc3RyaW5nO1xuICAgICAgICBzZXNzaW9uLnVzZXIubmFtZSA9IHRva2VuLm5hbWUgYXMgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmVtYWlsID0gdG9rZW4uZW1haWwgYXMgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmltYWdlID0gdG9rZW4ucGljdHVyZSBhcyBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICAgICAgICBzZXNzaW9uLnVzZXIucm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmZpcnN0TmFtZSA9IHRva2VuLmZpcnN0TmFtZSBhcyBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICAgICAgICBzZXNzaW9uLnVzZXIubGFzdE5hbWUgPSB0b2tlbi5sYXN0TmFtZSBhcyBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICAgICAgICBzZXNzaW9uLnVzZXIuZW1haWxWZXJpZmllZCA9IHRva2VuLmVtYWlsVmVyaWZpZWQgYXMgKERhdGUgfCBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gICAgYXN5bmMgcmVkaXJlY3QoeyB1cmwsIGJhc2VVcmwgfSkge1xuICAgICAgY29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwsIGJhc2VVcmwpO1xuICAgICAgY29uc29sZS5sb2coYFJlZGlyZWN0IGNhbGxiYWNrOiBVUkw9JyR7dXJsfScsIEJhc2VVUkw9JyR7YmFzZVVybH0nLCBQYXRobmFtZT0nJHtwYXJzZWRVcmwucGF0aG5hbWV9J2ApO1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSdyZSBiZWluZyByZWRpcmVjdGVkIHRvIC9sb2dpbiB3aXRoIGVycm9yPUNhbGxiYWNrLCBidXQgYXV0aGVudGljYXRpb24gd2FzIHN1Y2Nlc3NmdWwsXG4gICAgICAvLyByZWRpcmVjdCB0byBzdWNjZXNzIHBhZ2UgaW5zdGVhZC4gVGhlIFwiQ2FsbGJhY2tcIiBlcnJvciBzb21ldGltZXMgYXBwZWFycyBldmVuIG9uIHN1Y2Nlc3NmdWwgYXV0aC5cbiAgICAgIGlmIChwYXJzZWRVcmwucGF0aG5hbWUgPT09IFwiL2xvZ2luXCIgJiYgcGFyc2VkVXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvclwiKSA9PT0gXCJDYWxsYmFja1wiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUmVkaXJlY3RpbmcgdG8gc3VjY2VzcyBwYWdlIGRlc3BpdGUgQ2FsbGJhY2sgZXJyb3JcIik7XG4gICAgICAgIHJldHVybiBgJHtiYXNlVXJsfS9zdWNjZXNzYDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgd2UncmUgYmVpbmcgcmVkaXJlY3RlZCB0byAvbG9naW4gd2l0aG91dCBleHBsaWNpdCBlcnJvcnMsIGdvIHRvIHN1Y2Nlc3NcbiAgICAgIGlmIChwYXJzZWRVcmwucGF0aG5hbWUgPT09IFwiL2xvZ2luXCIgJiYgIXBhcnNlZFVybC5zZWFyY2hQYXJhbXMuaGFzKFwiZXJyb3JcIikpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJSZWRpcmVjdGluZyB0byBzdWNjZXNzIHBhZ2UgZnJvbSBsb2dpblwiKTtcbiAgICAgICAgcmV0dXJuIGAke2Jhc2VVcmx9L3N1Y2Nlc3NgO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGb3IgYW55IG90aGVyIHJlZGlyZWN0IHRvIGxvZ2luIHdpdGggcmVhbCBlcnJvcnMsIGFsbG93IGl0XG4gICAgICBpZiAocGFyc2VkVXJsLnBhdGhuYW1lID09PSBcIi9sb2dpblwiICYmIHBhcnNlZFVybC5zZWFyY2hQYXJhbXMuaGFzKFwiZXJyb3JcIikpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBbGxvd2luZyByZWRpcmVjdCB0byBsb2dpbiB3aXRoIGVycm9yOlwiLCBwYXJzZWRVcmwuc2VhcmNoUGFyYW1zLmdldChcImVycm9yXCIpKTtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgdGhlcmUncyBhIHNwZWNpZmljIGNhbGxiYWNrVXJsIChub3QgbG9naW4pLCB1c2UgaXRcbiAgICAgIGNvbnN0IGNhbGxiYWNrVXJsID0gcGFyc2VkVXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjYWxsYmFja1VybFwiKTtcbiAgICAgIGlmIChjYWxsYmFja1VybCAmJiBjYWxsYmFja1VybCAhPT0gYCR7YmFzZVVybH0vbG9naW5gKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgY2FsbGJhY2tVcmw6XCIsIGNhbGxiYWNrVXJsKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrVXJsO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhcIkRlZmF1bHQgcmVkaXJlY3QgdG86XCIsIHVybCk7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gIH0sXG4gIGV2ZW50czoge1xuICAgIGFzeW5jIHNpZ25JbigpIHsgLyogY29uc29sZS5sb2coXCJFVkVOVDogc2lnbkluXCIpOyAqLyB9LFxuICAgIGFzeW5jIHNpZ25PdXQoKSB7IC8qIGNvbnNvbGUubG9nKFwiRVZFTlQ6IHNpZ25PdXRcIik7ICovIH0sXG4gICAgYXN5bmMgY3JlYXRlVXNlcigpIHsgLyogY29uc29sZS5sb2coXCJFVkVOVDogY3JlYXRlVXNlclwiKTsgKi8gfSxcbiAgICBhc3luYyB1cGRhdGVVc2VyKCkgeyAvKiBjb25zb2xlLmxvZyhcIkVWRU5UOiB1cGRhdGVVc2VyXCIpOyAqLyB9LFxuICAgIGFzeW5jIGxpbmtBY2NvdW50KCkgeyAvKiBjb25zb2xlLmxvZyhcIkVWRU5UOiBsaW5rQWNjb3VudFwiKTsgKi8gfSxcbiAgICBhc3luYyBzZXNzaW9uKCkgeyAvKiBjb25zb2xlLmxvZyhcIkVWRU5UOiBzZXNzaW9uXCIpOyAqLyB9LFxuICB9LFxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIixcbn07XG5cbmNvbnN0IGhhbmRsZXIgPSBOZXh0QXV0aChhdXRoT3B0aW9ucyk7XG5cbmV4cG9ydCB7IGhhbmRsZXIgYXMgR0VULCBoYW5kbGVyIGFzIFBPU1QgfTsgIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiR29vZ2xlUHJvdmlkZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiUHJpc21hQWRhcHRlciIsInByaXNtYSIsImJjcnlwdCIsInoiLCJjcmVkZW50aWFsc1NjaGVtYSIsIm9iamVjdCIsImVtYWlsIiwic3RyaW5nIiwicGFzc3dvcmQiLCJtaW4iLCJhdXRoT3B0aW9ucyIsImFkYXB0ZXIiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJsYWJlbCIsInR5cGUiLCJwbGFjZWhvbGRlciIsImF1dGhvcml6ZSIsInBhcnNlZCIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJFcnJvciIsImRhdGEiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaXNWYWxpZCIsImNvbXBhcmUiLCJpZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwidHJpbSIsImltYWdlIiwiZW1haWxWZXJpZmllZCIsInJvbGUiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0NMSUVOVF9JRCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJhdXRob3JpemF0aW9uIiwicGFyYW1zIiwic2NvcGUiLCJwcm9maWxlIiwic3ViIiwicGljdHVyZSIsImVtYWlsX3ZlcmlmaWVkIiwiRGF0ZSIsImdpdmVuX25hbWUiLCJmYW1pbHlfbmFtZSIsInNlc3Npb24iLCJzdHJhdGVneSIsInBhZ2VzIiwic2lnbkluIiwiZXJyb3IiLCJjYWxsYmFja3MiLCJhY2NvdW50IiwicHJvdmlkZXIiLCJnb29nbGVQcm9maWxlIiwiZGF0YVRvVXBkYXRlIiwicHJvZmlsZUVtYWlsVmVyaWZpZWQiLCJ1c2VyRW1haWxWZXJpZmllZCIsImdldFRpbWUiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwidXBkYXRlIiwiY29uc29sZSIsImp3dCIsInRva2VuIiwiZGJVc2VyIiwicmVkaXJlY3QiLCJ1cmwiLCJiYXNlVXJsIiwicGFyc2VkVXJsIiwiVVJMIiwibG9nIiwicGF0aG5hbWUiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJoYXMiLCJjYWxsYmFja1VybCIsImV2ZW50cyIsInNpZ25PdXQiLCJjcmVhdGVVc2VyIiwidXBkYXRlVXNlciIsImxpbmtBY2NvdW50IiwiZGVidWciLCJoYW5kbGVyIiwiR0VUIiwiUE9TVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/[...nextauth]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ] : 0,\n    datasources: {\n        db: {\n            url: process.env.DATABASE_URL\n        }\n    }\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBS0MsS0FBeUIsR0FBZ0I7UUFBQztRQUFTO1FBQVE7UUFBUTtLQUFRLEdBQUcsQ0FBUztJQUM1RkMsYUFBYTtRQUNYQyxJQUFJO1lBQ0ZDLEtBQUtILFFBQVFJLEdBQUcsQ0FBQ0MsWUFBWTtRQUMvQjtJQUNGO0FBQ0YsR0FBRztBQUVILElBQUlMLElBQXlCLEVBQWNKLGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NsYXVzZWRpZmYtLS1kb2N1bWVudC1jb21wYXJpc29uLXRvb2wvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KHtcbiAgbG9nOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IFsncXVlcnknLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ10gOiBbJ2Vycm9yJ10sXG4gIGRhdGFzb3VyY2VzOiB7XG4gICAgZGI6IHtcbiAgICAgIHVybDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMXG4gICAgfVxuICB9XG59KTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7ICJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyIsImRhdGFzb3VyY2VzIiwiZGIiLCJ1cmwiLCJlbnYiLCJEQVRBQkFTRV9VUkwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/uuid","vendor-chunks/zod","vendor-chunks/oauth","vendor-chunks/@panva","vendor-chunks/preact-render-to-string","vendor-chunks/oidc-token-hash","vendor-chunks/bcryptjs","vendor-chunks/preact","vendor-chunks/object-hash","vendor-chunks/cookie","vendor-chunks/@next-auth"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.ts&appDir=%2FUsers%2Fviniciusalbino%2FDocuments%2FGitHub%2Fclausediff.nosync%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fviniciusalbino%2FDocuments%2FGitHub%2Fclausediff.nosync&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();