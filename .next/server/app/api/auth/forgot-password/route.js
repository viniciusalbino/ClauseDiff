"use strict";(()=>{var e={};e.id=118,e.ids=[118],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},72164:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>w,staticGenerationAsyncStorage:()=>f});var o={};t.r(o),t.d(o,{POST:()=>m});var s=t(49303),a=t(88716),i=t(60670),n=t(87070),u=t(20728),p=t(9133),d=t(6113),l=t.n(d);let c=p.z.object({email:p.z.string().email("Email inv\xe1lido").toLowerCase()});async function m(e){try{let r=await e.json(),{email:t}=c.parse(r);if(await u._.user.findUnique({where:{email:t}})){let e=l().randomBytes(32).toString("hex"),r=new Date(Date.now()+9e5);await u._.user.update({where:{email:t},data:{resetToken:e,resetTokenExpiry:r}});let o=`${process.env.NEXTAUTH_URL}/reset-password?token=${e}`;console.log(`[PASSWORD RESET] Reset link for ${t}: ${o}`)}return n.NextResponse.json({success:!0,message:"Se o email estiver cadastrado, voc\xea receber\xe1 um link de recupera\xe7\xe3o de senha."})}catch(e){if(console.error("Error in forgot-password endpoint:",e),e instanceof p.z.ZodError)return n.NextResponse.json({error:"Dados inv\xe1lidos",details:e.errors[0]?.message||"Email \xe9 obrigat\xf3rio"},{status:400});return n.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/forgot-password/route",pathname:"/api/auth/forgot-password",filename:"route",bundlePath:"app/api/auth/forgot-password/route"},resolvedPagePath:"/Users/viniciusalbino/Documents/GitHub/clausediff.nosync/app/api/auth/forgot-password/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:w}=g,v="/api/auth/forgot-password/route";function x(){return(0,i.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:f})}},20728:(e,r,t)=>{t.d(r,{_:()=>s});let o=require("@prisma/client"),s=globalThis.prisma??new o.PrismaClient({log:["error"],datasources:{db:{url:process.env.DATABASE_URL}}})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,532,70],()=>t(72164));module.exports=o})();