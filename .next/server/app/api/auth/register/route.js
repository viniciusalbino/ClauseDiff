"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},34389:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>x,patchFetch:()=>R,requestAsyncStorage:()=>N,routeModule:()=>g,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{POST:()=>c});var a=t(49303),i=t(88716),o=t(60670),n=t(87070),m=t(9133),u=t(42023),l=t.n(u),p=t(20728);let d=m.z.object({firstName:m.z.string().min(1,"Nome \xe9 obrigat\xf3rio").max(50,"Nome muito longo"),lastName:m.z.string().min(1,"Sobrenome \xe9 obrigat\xf3rio").max(50,"Sobrenome muito longo"),email:m.z.string().email("Email inv\xe1lido").toLowerCase(),password:m.z.string().min(6,"Senha deve ter pelo menos 6 caracteres").max(100,"Senha muito longa")});async function c(e){try{let r=await e.json(),t=d.parse(r);if(await p._.user.findUnique({where:{email:t.email}}))return n.NextResponse.json({message:"Um usu\xe1rio com este email j\xe1 existe",code:"USER_EXISTS"},{status:400});let s=await l().hash(t.password,12),a=await p._.user.create({data:{firstName:t.firstName,lastName:t.lastName,name:`${t.firstName} ${t.lastName}`.trim(),email:t.email,password:s,role:"USER"},select:{id:!0,firstName:!0,lastName:!0,name:!0,email:!0,role:!0,createdAt:!0}});return n.NextResponse.json({message:"Conta criada com sucesso",user:{id:a.id,firstName:a.firstName,lastName:a.lastName,name:a.name,email:a.email,role:a.role}},{status:201})}catch(e){if(console.error("Registration error:",e),e instanceof m.z.ZodError)return n.NextResponse.json({message:"Dados inv\xe1lidos",errors:e.errors.map(e=>({field:e.path.join("."),message:e.message}))},{status:400});if(e instanceof Error&&e.message.includes("Unique constraint"))return n.NextResponse.json({message:"Um usu\xe1rio com este email j\xe1 existe",code:"USER_EXISTS"},{status:400});return n.NextResponse.json({message:"Erro interno do servidor. Tente novamente.",code:"INTERNAL_ERROR"},{status:500})}}let g=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/viniciusalbino/Documents/GitHub/clausediff.nosync/app/api/auth/register/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:N,staticGenerationAsyncStorage:f,serverHooks:h}=g,x="/api/auth/register/route";function R(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},20728:(e,r,t)=>{t.d(r,{_:()=>a});let s=require("@prisma/client"),a=globalThis.prisma??new s.PrismaClient({log:["error"],datasources:{db:{url:process.env.DATABASE_URL}}})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,532,70,23],()=>t(34389));module.exports=s})();