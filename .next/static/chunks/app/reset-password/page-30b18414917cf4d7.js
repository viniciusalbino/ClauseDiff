(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{3831:function(e,s,t){Promise.resolve().then(t.bind(t,1793))},1793:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(7437),r=t(2265),l=t(6463),o=t(7138),n=t(6700);let i=n.z.object({password:n.z.string().min(8,"Senha deve ter pelo menos 8 caracteres").regex(/[A-Z]/,"Senha deve conter ao menos uma letra mai\xfascula").regex(/[a-z]/,"Senha deve conter ao menos uma letra min\xfascula").regex(/[0-9]/,"Senha deve conter ao menos um n\xfamero").regex(/[^A-Za-z0-9]/,"Senha deve conter ao menos um caractere especial"),confirmPassword:n.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"As senhas n\xe3o coincidem",path:["confirmPassword"]}),d=()=>(0,a.jsx)("svg",{className:"w-6 h-6 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});function c(){let[e,s]=(0,r.useState)({password:"",confirmPassword:""}),[t,c]=(0,r.useState)({}),[x,m]=(0,r.useState)(!1),[u,f]=(0,r.useState)(!0),[h,p]=(0,r.useState)(!1),[w,b]=(0,r.useState)(!1),[j,g]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),y=(0,l.useSearchParams)().get("token");(0,r.useEffect)(()=>{(async()=>{if(!y){g("Token de recupera\xe7\xe3o n\xe3o encontrado na URL"),f(!1);return}try{let e=await fetch("/api/auth/reset-password?token=".concat(encodeURIComponent(y))),s=await e.json();e.ok&&s.valid?(p(!0),N(s.email)):g(s.error||"Token inv\xe1lido ou expirado")}catch(e){g("Erro ao validar o token de recupera\xe7\xe3o")}finally{f(!1)}})()},[y]);let k=e=>{let{name:a,value:r}=e.target;s(e=>({...e,[a]:r})),t[a]&&c(e=>({...e,[a]:""})),j&&g("")},S=()=>{try{return i.parse(e),c({}),!0}catch(e){if(e instanceof n.z.ZodError){let s={};e.errors.forEach(e=>{e.path[0]&&(s[e.path[0]]=e.message)}),c(s)}return!1}},C=async s=>{if(s.preventDefault(),S()&&y){m(!0),g("");try{let s=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:y,password:e.password,confirmPassword:e.confirmPassword})}),t=await s.json();s.ok?b(!0):g(t.details||t.error||"Erro ao redefinir senha")}catch(e){g("Erro de conex\xe3o. Tente novamente.")}finally{m(!1)}}};return u?(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 text-slate-800 flex flex-col items-center justify-between p-4",children:[(0,a.jsxs)("header",{className:"w-full max-w-6xl mx-auto flex justify-between items-center py-4 px-2 sm:px-0",children:[(0,a.jsxs)(o.default,{href:"/",className:"flex items-center text-2xl font-semibold text-slate-700 hover:text-blue-600",children:[(0,a.jsx)(d,{}),"ClauseDiff"]}),(0,a.jsx)(o.default,{href:"/login",className:"text-sm text-slate-600 hover:text-blue-600 hover:underline",children:"Voltar para Login"})]}),(0,a.jsx)("main",{className:"flex flex-col items-center justify-center w-full flex-grow",children:(0,a.jsx)("div",{className:"w-full max-w-md p-8 space-y-8 bg-white shadow-xl rounded-lg text-center",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("svg",{className:"animate-spin mx-auto h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("h2",{className:"mt-4 text-xl font-semibold text-slate-900",children:"Validando link de recupera\xe7\xe3o..."})]})})}),(0,a.jsx)("footer",{className:"w-full max-w-6xl mx-auto text-center py-6 px-2 sm:px-0",children:(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["\xa9 ",new Date().getFullYear()," ClauseDiff. Todos os direitos reservados."]})})]}):w?(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 text-slate-800 flex flex-col items-center justify-between p-4",children:[(0,a.jsxs)("header",{className:"w-full max-w-6xl mx-auto flex justify-between items-center py-4 px-2 sm:px-0",children:[(0,a.jsxs)(o.default,{href:"/",className:"flex items-center text-2xl font-semibold text-slate-700 hover:text-blue-600",children:[(0,a.jsx)(d,{}),"ClauseDiff"]}),(0,a.jsx)(o.default,{href:"/login",className:"text-sm text-slate-600 hover:text-blue-600 hover:underline",children:"Fazer Login"})]}),(0,a.jsx)("main",{className:"flex flex-col items-center justify-center w-full flex-grow",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-8 space-y-8 bg-white shadow-xl rounded-lg",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:(0,a.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-900",children:"Senha Redefinida!"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:"Sua senha foi redefinida com sucesso. Voc\xea j\xe1 pode fazer login com sua nova senha."})]}),(0,a.jsx)("div",{children:(0,a.jsx)(o.default,{href:"/login",className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Fazer Login"})})]})}),(0,a.jsx)("footer",{className:"w-full max-w-6xl mx-auto text-center py-6 px-2 sm:px-0",children:(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["\xa9 ",new Date().getFullYear()," ClauseDiff. Todos os direitos reservados."]})})]}):h?(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 text-slate-800 flex flex-col items-center justify-between p-4",children:[(0,a.jsxs)("header",{className:"w-full max-w-6xl mx-auto flex justify-between items-center py-4 px-2 sm:px-0",children:[(0,a.jsxs)(o.default,{href:"/",className:"flex items-center text-2xl font-semibold text-slate-700 hover:text-blue-600",children:[(0,a.jsx)(d,{}),"ClauseDiff"]}),(0,a.jsx)(o.default,{href:"/login",className:"text-sm text-slate-600 hover:text-blue-600 hover:underline",children:"Voltar para Login"})]}),(0,a.jsx)("main",{className:"flex flex-col items-center justify-center w-full flex-grow",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-8 space-y-8 bg-white shadow-xl rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-center text-3xl font-bold text-slate-900",children:"Redefinir Senha"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-slate-600",children:v&&"Criar nova senha para ".concat(v)})]}),j&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-md text-sm",children:(0,a.jsx)("p",{children:j})}),(0,a.jsxs)("form",{className:"space-y-6",onSubmit:C,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"Nova Senha"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,placeholder:"••••••••",value:e.password,onChange:k,className:"appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 ".concat(t.password?"border-red-300":"border-slate-300"),disabled:x}),t.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t.password})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700",children:"Confirmar Nova Senha"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,placeholder:"••••••••",value:e.confirmPassword,onChange:k,className:"appearance-none block w-full px-3 py-2 border rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 ".concat(t.confirmPassword?"border-red-300":"border-slate-300"),disabled:x}),t.confirmPassword&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t.confirmPassword})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Redefinindo...":"Redefinir Senha"})})]}),(0,a.jsx)("div",{className:"text-sm text-center",children:(0,a.jsx)(o.default,{href:"/login",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Voltar para Login"})})]})}),(0,a.jsx)("footer",{className:"w-full max-w-6xl mx-auto text-center py-6 px-2 sm:px-0",children:(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["\xa9 ",new Date().getFullYear()," ClauseDiff. Todos os direitos reservados."]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 text-slate-800 flex flex-col items-center justify-between p-4",children:[(0,a.jsxs)("header",{className:"w-full max-w-6xl mx-auto flex justify-between items-center py-4 px-2 sm:px-0",children:[(0,a.jsxs)(o.default,{href:"/",className:"flex items-center text-2xl font-semibold text-slate-700 hover:text-blue-600",children:[(0,a.jsx)(d,{}),"ClauseDiff"]}),(0,a.jsx)(o.default,{href:"/login",className:"text-sm text-slate-600 hover:text-blue-600 hover:underline",children:"Voltar para Login"})]}),(0,a.jsx)("main",{className:"flex flex-col items-center justify-center w-full flex-grow",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-8 space-y-8 bg-white shadow-xl rounded-lg",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:(0,a.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-900",children:"Link Inv\xe1lido"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-600",children:j||"Este link de recupera\xe7\xe3o \xe9 inv\xe1lido ou expirou. Solicite um novo link."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(o.default,{href:"/forgot-password",className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Solicitar Novo Link"}),(0,a.jsx)(o.default,{href:"/login",className:"w-full flex justify-center py-2.5 px-4 border border-slate-300 rounded-md shadow-sm text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Voltar para Login"})]})]})}),(0,a.jsx)("footer",{className:"w-full max-w-6xl mx-auto text-center py-6 px-2 sm:px-0",children:(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["\xa9 ",new Date().getFullYear()," ClauseDiff. Todos os direitos reservados."]})})]})}},7138:function(e,s,t){"use strict";t.d(s,{default:function(){return r.a}});var a=t(231),r=t.n(a)},6463:function(e,s,t){"use strict";var a=t(1169);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[231,700,971,23,744],function(){return e(e.s=3831)}),_N_E=e.O()}]);